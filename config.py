# -*- coding: utf-8 -*-
"""
Конфигурация A/B-теста промптов для постов LR в Telegram.

Промпт А — исходный (контроль).
Промпт Б — с акцентом на медицинскую/нутрициологическую терминологию.
"""

# Модель и параметры генерации (одинаковые для A и B)
MODEL = "gpt-4o-mini"
TEMPERATURE = 0.5
MAX_TOKENS = 1024

# --- Промпт А (контроль) ---
PROMPT_A = (
    "На основании описания товара LR создай пост для телеграмм канала — описание товара с продающим текстом, "
    "ничего не придумывай, используй только точные подтвержденные данные о влиянии товара и ингредиентов на здоровье, "
    "которые можно взять не только из отправленного мной текста, но и используя общедоступные знания."
)

# --- Промпт Б (эксперимент: больше медицинских терминов) ---
PROMPT_B = (
    "На основании описания товара LR создай пост для телеграмм канала — описание товара с продающим текстом. "
    "Ничего не придумывай, используй только точные подтверждённые данные о влиянии товара и ингредиентов на здоровье "
    "(из отправленного текста или общедоступных знаний). "
    "Важно: формулируй пользу для здоровья с использованием корректной медицинской и нутрициологической терминологии — "
    "указывай действующие вещества (например, ацеманнан, иммуноглобулины, декспантенол), "
    "при необходимости — механизмы действия или группы эффектов (иммуномодуляция, регенерация, антиоксидантное действие), "
    "чтобы пост был понятен аудитории, интересующейся здоровьем и составом продуктов."
)

# --- Критерии успеха ---
# Primary-метрика: релевантность (1–5): соответствие запросу + продающая сила поста
# Guard-метрика: галлюцинации (0/1 на ответ): наличие утверждений о здоровье, которых нет в описании

# Минимальный детектируемый эффект (MDE)
# Считаем улучшение значимым, если средняя релевантность Б выше средней релевантности А хотя бы на MDE_RELEVANCE
MDE_RELEVANCE = 0.3  # по шкале 1–5

# Guard: доля ответов с галлюцинациями у Б не должна превышать долю у А
# (если у А 10% с галлюцинациями, у Б допускается не более 10%)

# Порог для «прошла по guard»: разница (hallucination_rate_B - hallucination_rate_A) не больше 0
GUARD_HALLUCINATION_MAX_INCREASE = 0.0
